{% extends 'bsr/base.html' %}

{% block heading %}
<div class="post-heading">
  <a class="heading" href="/">
    <h1>{{post.title}}</h1>
  </a>
    {% if post.origin %}
    <h2 class="subheading"><a class="origin" href="{{post.origin}}">원본자료 출처</a></h2>
    {% endif %}
    <span class="meta">by <a href="#">{{post.author}}</a>&nbsp;&nbsp;|&nbsp;&nbsp;{{ post.created_date | date:"Y-m-d D" }}</span>
</div>
{% endblock %}

{% block content %}
<p>
<div id="player"></div>
{% autoescape off %}
{{post.text|linebreaksbr|urlize }}
{% endautoescape %}
</p>
{% if post.author == user %}
<div class="post-set-btn">
  <a href="{%url 'study:post_edit' pk=post.pk %}">
    <button type="button" class="btn btn-success">수정</button>
  </a>
  <a href="{%url 'study:post_remove' pk=post.pk %}">
    <button type="button" class="btn btn-danger">삭제</button>
  </a>
  {% endif %}
  <a href="{% url 'study:post_list' %}">
    <button type="button" class="btn btn-info">뒤로</button>
  </a>
</div>
{% if post.video_key %}
<script>
    var tag = document.createElement('script');

    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            videoId: '{{ post.video_key }}'
        });
    }
</script>
{% endif %}
{% endblock content %}
